// Generated by CoffeeScript 1.2.1-pre
(function() {
  var App, AppView, PageTitle, PageTitleList, PageTitleView, PageTitles;

  PageTitle = Backbone.Model.extend({
    defaults: function() {
      return {
        title: ""
      };
    },
    initialize: function() {
      if (!this.get('title')) {
        return this.set({
          'title': this.defaults.title
        });
      }
    },
    clear: function() {
      return this.destroy();
    }
  });

  PageTitleList = Backbone.Collection.extend({
    model: PageTitle,
    url: ROOT + 'page_titles'
  });

  PageTitles = new PageTitleList;

  PageTitleView = Backbone.View.extend({
    tagName: 'li',
    template: _.template('<%= title %>'),
    events: {
      'click': 'doAlert'
    },
    initialize: function() {
      this.model.bind('change', this.render, this);
      return this.model.bind('destroy', this.remove, this);
    },
    render: function() {
      return this.$el.html(this.template(this.model.toJSON()));
    },
    doAlert: function() {
      return alert("HI!");
    }
  });

  AppView = Backbone.View.extend({
    el: $('#pulse-app'),
    initialize: function() {
      PageTitles.bind('add', this.addOne, this);
      PageTitles.bind('reset', this.addAll, this);
      PageTitles.bind('all', this.render, this);
      return PageTitles.fetch();
    },
    render: function() {},
    addOne: function(page_title) {
      var view;
      view = new PageTitleView({
        model: page_title
      });
      view.render();
      console.log(page_title, view, view.el);
      return this.$('#page-titles').append(view.el);
    },
    addAll: function() {
      return PageTitles.each(this.addOne);
    }
  });

  App = new AppView;

}).call(this);
